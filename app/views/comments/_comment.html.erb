<div class="card mt-3 rounded">
  <div class="card-header d-flex justify-content-between">
    <% if comment.author == current_author %>
      <small>You</small>
    <%else%>
      <small>
        <strong><%= comment.author.first_name %> <%= comment.author.last_name %></strong>
      </small>
    <% end %>
    <span>
      <small><%= time_ago_in_words(comment.created_at)%> ago</small>
    </span>
  </div>
  <div class="card-body rounded-bottom">
    <div class="mb-3">
      <%= comment.content%>
    </div>
    <% if comment.image.attached? %>
      <div class="mb-3">
        <%= cl_image_tag(comment.image.key, width: '20%', height: '20%')%>
      </div>
    <% end %>
    <div class="mb-1 d-flex justify-content-between text-center btn-sm">
      <span class="d-flex">
        <small class="mr-2 ">
          <%= render 'likes/button', likeable: comment %>
        </small>
        <% if comment.parent_id.nil? %>
          <small class="comment-form-display mr-2 btn btn-primary mt-auto mb-5 btn-sm">
            <a href="#" class="text-decoration-none text-white">Reply</a>
          </small>
          <div class="comment-form">
            <%= render partial: 'comments/form', locals: {post: comment.post, parent: comment} %>
          </div>
        <% end %>
      </span>
      <span>
      <% if current_author == comment.author || current_author.moderator? %>
        <%= button_to "Delete", post_comment_path(comment.post_id, comment), method: :delete, remote: true, class:"btn btn-secondary btn-sm" %>
      <% end %>
        <%= render 'reports/button', reportable: comment %>
        <span>
        </div>
        <div class="mb-6 ">
          <span class="d-flex ">
            <small class="mr-2 text-center" >
              <%= pluralize(comment.likes.count, "Like")%>
            </small>
            <% if comment.parent_id.nil? %>
              <small>
                <%= pluralize(comment.comments.count, "Reply")%>
              </small>
            <% end %>
          </span>
          <span></span>
        </div>
        <div class="pl-4">
          <%= render comment.comments.includes(:author).order(:id) %>
        </div>
      </div>
    </div>
